<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Profil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="profile-content">
  
  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="loading-spinner">
    <ion-spinner name="crescent"></ion-spinner>
  </div>

  <!-- Profile Section -->
  <div *ngIf="!isLoading" class="profile-section">
    
    <!-- User Card -->
    <div class="user-card">
      <div class="avatar-section">
        <div class="avatar">
          <img *ngIf="!hasProfilePicture()" src="https://cdn.dribbble.com/users/5135626/avatars/normal/8e6fbe27d62bf863c9f9c764a9661028.png?1695835949" alt="Profile" />
          <img *ngIf="hasProfilePicture()" [src]="getProfilePicture()" alt="Profile" />
        </div>
        <div class="user-info">
          <h2 class="user-name">{{ getUserName() }}</h2>
          <p class="user-email">{{ getUserEmail() }}</p>
          <p class="user-phone">{{ getUserPhone() }}</p>
          <!--<p class="user-type">{{ getUserType() }}</p>-->
        </div>
        <ion-button fill="clear" class="edit-btn" (click)="onEditProfile()">
          <ion-icon name="create-outline"></ion-icon>
        </ion-button>
      </div>
    </div>

    <!-- Menu Sections -->
    <div class="menu-sections">
      
      <!-- Trips Section -->
      <div class="menu-section">
        <h3 class="section-title">Courses</h3>
        <ion-list lines="none">
          <ion-item button detail="true" class="menu-item" (click)="onHistory()">
            <ion-icon name="car-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Historique des courses</ion-label>
          </ion-item>
          <ion-item button detail="true" class="menu-item" (click)="onFavorites()">
            <ion-icon name="heart-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Adresses favorites</ion-label>
          </ion-item>
          <ion-item button detail="true" class="menu-item" (click)="onBilling()">
            <ion-icon name="document-text-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Facturation</ion-label>
          </ion-item>
        </ion-list>
      </div>

      <!-- Account Section -->
      <div class="menu-section">
        <h3 class="section-title">Compte</h3>
        <ion-list lines="none">
          <ion-item button detail="true" class="menu-item" (click)="onAddresses()">
            <ion-icon name="location-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Adresses</ion-label>
          </ion-item>
          <ion-item button detail="true" class="menu-item" (click)="onPaymentMethods()">
            <ion-icon name="card-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Moyens de paiement</ion-label>
          </ion-item>
          <ion-item button detail="true" class="menu-item" (click)="onNotifications()">
            <ion-icon name="notifications-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Notifications</ion-label>
          </ion-item>
          <ion-item button detail="true" class="menu-item" (click)="onLanguage()">
            <ion-icon name="language-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Langue</ion-label>
            <ion-note slot="end">Français</ion-note>
          </ion-item>
        </ion-list>
      </div>

      <!-- Support Section -->
      <div class="menu-section">
        <h3 class="section-title">Support</h3>
        <ion-list lines="none">
          <ion-item button detail="true" class="menu-item" (click)="onHelp()">
            <ion-icon name="help-circle-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Aide & Support</ion-label>
          </ion-item>
          <ion-item button detail="true" class="menu-item" (click)="onReportProblem()">
            <ion-icon name="alert-circle-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Signaler un problème</ion-label>
          </ion-item>
          <ion-item button detail="true" class="menu-item" (click)="onRateApp()">
            <ion-icon name="star-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Évaluer l'application</ion-label>
          </ion-item>
        </ion-list>
      </div>

      <!-- Legal Section -->
      <div class="menu-section">
        <h3 class="section-title">Légal</h3>
        <ion-list lines="none">
          <ion-item button detail="true" class="menu-item" (click)="onTerms()">
            <ion-icon name="document-text-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Conditions d'utilisation</ion-label>
          </ion-item>
          <ion-item button detail="true" class="menu-item" (click)="onPrivacy()">
            <ion-icon name="shield-checkmark-outline" slot="start" class="menu-icon"></ion-icon>
            <ion-label>Politique de confidentialité</ion-label>
          </ion-item>
        </ion-list>
      </div>

      <!-- Logout Button -->
      <div class="logout-section">
        <ion-button expand="block" (click)="logout()" fill="outline" class="logout-btn">
          <ion-icon name="log-out-outline" slot="start"></ion-icon>
          Se Déconnecter
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>